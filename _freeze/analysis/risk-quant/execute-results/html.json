{
  "hash": "467a65f587ceb58cfce49617171e7355",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Technology Risk Quantification\"\nauthor: \"John Benninghoff\"\ndate: '2024-07-23'\ndate-modified: '2024-07-23'\ncategories: risk quantification\norder: 103\noutput:\n  html_notebook:\n    theme:\n      version: 5\n      preset: bootstrap\n    css: assets/extra.css\n    pandoc_args: --shift-heading-level-by=1\n    toc: yes\n    toc_float:\n      collapsed: no\n      smooth_scroll: no\n---\n\n\n\n\nPrototype Risk Quantification tool for my SIRAcon 2024 talk, \"[UnFAIR: Simplifying and Expanding Technology Risk Quantification](https://web.cvent.com/event/7f49b0a6-bca9-46fd-8245-a2deb671efee/websitePage:23d1376e-2723-411a-910a-0edf87b03015?session=956b9176-13ad-4dac-af3c-e8ccb30bae8a&shareLink=true).\"\n\n# Questions/TODO\n\n- [x] Figure out how to calculate log normal `meanlog` and `sdlog` from expert estimation (see [Calculating SD for normal distribution with only mean and 5% and 95% quantile values](https://stats.stackexchange.com/questions/158110/calculating-sd-for-normal-distribution-with-only-mean-and-5-and-95-quantile-va))\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(jbplot)\nlibrary(readxl)\nlibrary(janitor)\nlibrary(dplyr)\nlibrary(formattable)\n```\n:::\n\n\n\n\n# Example Data\n\nGenerate realistic example data to populate the Excel spreadsheet. As discovered in practice, while\nthe initial risks (\"cybersecurity breach\" and \"technology outage\") are raised by the technology\nteam, we find that the business risks (here represented by \"loss of customer\") are significantly\nlarger, caused by the functional obsolescence of the inventory system.\n\n## Frequency\n\nExperts are asked to estimate the frequency of an adverse event, which is used as the average\narrival rate for a Poisson distribution ($\\lambda$).\n\nFrom my [breach rate analysis](breach-rates.Rmd), the largest firms experience a cybersecurity\nbreach about once every three years ($\\lambda$ = 0.347). A reasonably high breach rate for a system\nis between 0.2 and 0.33.\n\nFrom my own experience, an unstable system might experience between 1-4 technology outages per year;\na $\\lambda$ of 2 fits this nicely:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data.frame(x = rpois(1e5, 2)), aes(x)) +\n  geom_hist_bw(binwidth = 1) +\n  scale_x_continuous(breaks = scales::breaks_width(1, offset = 1)) +\n  coord_cartesian(xlim = c(0, 10)) +\n  labs(x = NULL, y = NULL) +\n  theme_quo(minor = FALSE)\n```\n\n::: {.cell-output-display}\n![](risk-quant_files/figure-html/outage_freq-1.png){width=816}\n:::\n:::\n\n\n\n\nFor the third risk, loss of customer, the firm has already experienced a loss, and expects this to\nincrease. For loss of customer we also choose a $\\lambda$ of 2.\n\n## Impact\n\nDrawing from the [IRIS 2022](https://www.cyentia.com/wp-content/uploads/IRIS-2022_Cyentia.pdf)\nreport, the loss magnitude of a cybersecurity breach follows a log-normal distribution with a mean\n($\\mu$) of 12.56 and a standard deviation ($\\sigma$) of 3.07, which gives a log-transformed\nlognormal curve of:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data.frame(x = c(0, 25)), aes(x)) +\n  stat_function(fun = dnorm, args = list(mean = 12.56, sd = 3.07)) +\n  labs(x = NULL, y = NULL) +\n  theme_quo()\n```\n\n::: {.cell-output-display}\n![](risk-quant_files/figure-html/breach_impact_dist-1.png){width=816}\n:::\n:::\n\n\n\n\nNote: from\n[Making sense of the rlnorm() function in R](https://msalganik.wordpress.com/2017/01/21/making-sense-of-the-rlnorm-function-in-r/):\n\n> `rlnorm(n = 1000000, meanlog = 7, sdlog = 75)` and `exp(rnorm(n = 1000000, mean = 7, sd = 75))`\n> produce the same result\n\nAn expert estimate matching this outcome for a breach would have low (5%), high (95%) and most\nlikely values of:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nqlnorm(c(0.05, 0.95, 0.5), meanlog = 12.56, sdlog = 3.07)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]     1826.76 44442227.03   284930.34\n```\n\n\n:::\n:::\n\n\n\n\nFor a technology outage, a mean of 0.1 and a standard deviation of 1.7 are reasonable choices for\nparameters that fit the data for outage duration from the\n[2022 VOID Report](https://mcusercontent.com/ad9b3a31c069c03a14227a79c/files/29e138f4-05b7-f560-a7d5-c337538a93eb/2022_Void_Report.pdf):\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data.frame(x = rlnorm(1e3, meanlog = 0.1, sdlog = 1.7)), aes(x)) +\n  geom_hist_bw(binwidth = 1) +\n  coord_cartesian(xlim = c(0, 80)) +\n  labs(x = NULL, y = NULL) +\n  theme_quo(minor = FALSE)\n```\n\n::: {.cell-output-display}\n![](risk-quant_files/figure-html/outage_duration_dist-1.png){width=816}\n:::\n:::\n\n\n\n\nThis gives low (5%), high (95%) and most likely values of:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nqlnorm(c(0.05, 0.95, 0.5), meanlog = 0.1, sdlog = 1.7)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  0.06745793 18.10614106  1.10517092\n```\n\n\n:::\n:::\n\n\n\n\nThis fits with my own experience; most outages last around an hour, and 95% of outages are resolved\nin 18 hours or less. From this, we can calculate a reasonable outage cost by multiplying by a\nper-hour rate. We assume that the main cost is caused by response and overtime paid out to catch up\nafter the system is restored, $10K/hour.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nqlnorm(c(0.05, 0.95, 0.5), meanlog = 0.1, sdlog = 1.7) * 10000\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]    674.5793 181061.4106  11051.7092\n```\n\n\n:::\n:::\n\n\n\n\nFor loss of customer, we estimate the low (5%) and high (95%) values at \\$100K and \\$20M\nrespectively; these are reasonable choices given the size of the firm. We can test this by\ncalculating the most likely value, after determining the mean and standard deviation using the\napproach from this\n[StackExchange Post](https://stats.stackexchange.com/questions/158110/calculating-sd-for-normal-distribution-with-only-mean-and-5-and-95-quantile-va):\n\nThe mean is calculated using: $\\mu = \\large \\frac{\\log(high) - \\log(low)}{2}$\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmeanlog_customer <- ((log(20000000) - log(100000)) / 2) + log(100000)\nmeanlog_customer\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 14.16208\n```\n\n\n:::\n:::\n\n\n\n\nThe standard deviation is calculated using:\n$\\DeclareMathOperator{\\qnorm}{qnorm} \\large \\sigma = \\frac{\\log(high) - \\log(low)}{2 \\times \\qnorm(0.95)}$\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsdlog_customer <- (log(20000000) - log(100000)) / (2 * qnorm(0.95))\nsdlog_customer\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1.610574\n```\n\n\n:::\n:::\n\n\n\n\nFrom this we get a customer impact range of:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nqlnorm(c(0.05, 0.95, 0.5), meanlog = meanlog_customer, sdlog = sdlog_customer)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]   100000 20000000  1414214\n```\n\n\n:::\n:::\n\n\n\n\n# Import\n\nImport data from Excel template, loading each tab into its own data frame. The data in\n`prototype.xlsx` is based on the examples provided above.\n\nRisk descriptions:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrisks <- read_xlsx(\"data/prototype.xlsx\", sheet = \"Risks\") |>\n  clean_names()\n\nrisks |>\n  formattable(align = \"l\")\n```\n\n::: {.cell-output-display}\n\n<table class=\"table table-condensed\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> risk </th>\n   <th style=\"text-align:left;\"> description </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Cybersecurity Breach </td>\n   <td style=\"text-align:left;\"> Risk of a cybersecurity breach of the inventory system. </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Technology Outage </td>\n   <td style=\"text-align:left;\"> Risk of an inventory system outage. </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Loss of Customer </td>\n   <td style=\"text-align:left;\"> Risk of losing and existing customer or failure to acquire a new customer due to functional limitations of the inventory system. </td>\n  </tr>\n</tbody>\n</table>\n\n:::\n:::\n\n\n\n\nRisk estimates:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nestimates <- read_xlsx(\"data/prototype.xlsx\", sheet = \"Estimates\") |>\n  clean_names() |>\n  rename(\n    lambda = frequency_per_yer, p05 = low_5_percent, p95 = high_95_percent, p50 = most_likely\n  )\n\nestimates |>\n  mutate(across(p05:p50, ~ currency(.x, digits = 0L))) |>\n  formattable(align = \"l\")\n```\n\n::: {.cell-output-display}\n\n<table class=\"table table-condensed\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> risk </th>\n   <th style=\"text-align:left;\"> expert </th>\n   <th style=\"text-align:left;\"> lambda </th>\n   <th style=\"text-align:left;\"> p05 </th>\n   <th style=\"text-align:left;\"> p95 </th>\n   <th style=\"text-align:left;\"> p50 </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Cybersecurity Breach </td>\n   <td style=\"text-align:left;\"> Technology Expert 1 </td>\n   <td style=\"text-align:left;\"> 0.25 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Cybersecurity Breach </td>\n   <td style=\"text-align:left;\"> Technology Expert 2 </td>\n   <td style=\"text-align:left;\"> 0.33 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Cybersecurity Breach </td>\n   <td style=\"text-align:left;\"> Technology Expert 3 </td>\n   <td style=\"text-align:left;\"> 0.20 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Cybersecurity Breach </td>\n   <td style=\"text-align:left;\"> Business Expert 1 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> $2,000 </td>\n   <td style=\"text-align:left;\"> $45,000,000 </td>\n   <td style=\"text-align:left;\"> $300,000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Cybersecurity Breach </td>\n   <td style=\"text-align:left;\"> Business Expert 2 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> $1,400 </td>\n   <td style=\"text-align:left;\"> $34,000,000 </td>\n   <td style=\"text-align:left;\"> $200,000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Cybersecurity Breach </td>\n   <td style=\"text-align:left;\"> Business Expert 3 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> $2,100 </td>\n   <td style=\"text-align:left;\"> $54,000,000 </td>\n   <td style=\"text-align:left;\"> $500,000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Cybersecurity Breach </td>\n   <td style=\"text-align:left;\"> Unicorn Expert </td>\n   <td style=\"text-align:left;\"> 0.25 </td>\n   <td style=\"text-align:left;\"> $1,900 </td>\n   <td style=\"text-align:left;\"> $44,000,000 </td>\n   <td style=\"text-align:left;\"> $275,000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Technology Outage </td>\n   <td style=\"text-align:left;\"> Technology Expert 1 </td>\n   <td style=\"text-align:left;\"> 2.00 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Technology Outage </td>\n   <td style=\"text-align:left;\"> Technology Expert 2 </td>\n   <td style=\"text-align:left;\"> 3.00 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Technology Outage </td>\n   <td style=\"text-align:left;\"> Technology Expert 3 </td>\n   <td style=\"text-align:left;\"> 1.00 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Technology Outage </td>\n   <td style=\"text-align:left;\"> Business Expert 1 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> $700 </td>\n   <td style=\"text-align:left;\"> $200,000 </td>\n   <td style=\"text-align:left;\"> $15,000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Technology Outage </td>\n   <td style=\"text-align:left;\"> Business Expert 2 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> $500 </td>\n   <td style=\"text-align:left;\"> $150,000 </td>\n   <td style=\"text-align:left;\"> $10,000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Technology Outage </td>\n   <td style=\"text-align:left;\"> Business Expert 3 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> $675 </td>\n   <td style=\"text-align:left;\"> $180,000 </td>\n   <td style=\"text-align:left;\"> $11,000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Technology Outage </td>\n   <td style=\"text-align:left;\"> Unicorn Expert </td>\n   <td style=\"text-align:left;\"> 2.00 </td>\n   <td style=\"text-align:left;\"> $800 </td>\n   <td style=\"text-align:left;\"> $220,000 </td>\n   <td style=\"text-align:left;\"> $16,000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Loss of Customer </td>\n   <td style=\"text-align:left;\"> Technology Expert 1 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Loss of Customer </td>\n   <td style=\"text-align:left;\"> Technology Expert 2 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Loss of Customer </td>\n   <td style=\"text-align:left;\"> Technology Expert 3 </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:left;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Loss of Customer </td>\n   <td style=\"text-align:left;\"> Business Expert 1 </td>\n   <td style=\"text-align:left;\"> 2.00 </td>\n   <td style=\"text-align:left;\"> $100,000 </td>\n   <td style=\"text-align:left;\"> $20,000,000 </td>\n   <td style=\"text-align:left;\"> $1,500,000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Loss of Customer </td>\n   <td style=\"text-align:left;\"> Business Expert 2 </td>\n   <td style=\"text-align:left;\"> 3.00 </td>\n   <td style=\"text-align:left;\"> $150,000 </td>\n   <td style=\"text-align:left;\"> $30,000,000 </td>\n   <td style=\"text-align:left;\"> $2,000,000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Loss of Customer </td>\n   <td style=\"text-align:left;\"> Business Expert 3 </td>\n   <td style=\"text-align:left;\"> 1.00 </td>\n   <td style=\"text-align:left;\"> $75,000 </td>\n   <td style=\"text-align:left;\"> $15,000,000 </td>\n   <td style=\"text-align:left;\"> $1,200,000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Loss of Customer </td>\n   <td style=\"text-align:left;\"> Unicorn Expert </td>\n   <td style=\"text-align:left;\"> 2.00 </td>\n   <td style=\"text-align:left;\"> $75,000 </td>\n   <td style=\"text-align:left;\"> $15,000,000 </td>\n   <td style=\"text-align:left;\"> $1,000,000 </td>\n  </tr>\n</tbody>\n</table>\n\n:::\n:::\n\n\n\n\n## Consensus Estimate\n\nUsing a simple average of all experts that provided an estimate (not blank/NA), this gives us a\nconsensus estimate for the three risks of:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nconsensus <- estimates |>\n  group_by(risk) |>\n  summarize(across(lambda:p50, ~ mean(.x, na.rm = TRUE)))\n\nconsensus |>\n  mutate(across(p05:p50, ~ currency(.x, digits = 0L))) |>\n  formattable(align = \"l\")\n```\n\n::: {.cell-output-display}\n\n<table class=\"table table-condensed\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> risk </th>\n   <th style=\"text-align:left;\"> lambda </th>\n   <th style=\"text-align:left;\"> p05 </th>\n   <th style=\"text-align:left;\"> p95 </th>\n   <th style=\"text-align:left;\"> p50 </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Cybersecurity Breach </td>\n   <td style=\"text-align:left;\"> 0.2575 </td>\n   <td style=\"text-align:left;\"> $1,850 </td>\n   <td style=\"text-align:left;\"> $44,250,000 </td>\n   <td style=\"text-align:left;\"> $318,750 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Loss of Customer </td>\n   <td style=\"text-align:left;\"> 2.0000 </td>\n   <td style=\"text-align:left;\"> $100,000 </td>\n   <td style=\"text-align:left;\"> $20,000,000 </td>\n   <td style=\"text-align:left;\"> $1,425,000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Technology Outage </td>\n   <td style=\"text-align:left;\"> 2.0000 </td>\n   <td style=\"text-align:left;\"> $669 </td>\n   <td style=\"text-align:left;\"> $187,500 </td>\n   <td style=\"text-align:left;\"> $13,000 </td>\n  </tr>\n</tbody>\n</table>\n\n:::\n:::\n",
    "supporting": [
      "risk-quant_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}